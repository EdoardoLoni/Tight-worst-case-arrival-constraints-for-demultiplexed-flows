# Tight Worst-Case Arrival Constraints for Demultiplexed Flows

This repository provides an open-source example implementation of the method proposed in the paper:

**“Tight Worst-Case Arrival Constraints for Demultiplexed Flows (Loni, Zippo, Stea, Andreozzi)”**

The implementation demonstrates how to compute tight worst-case arrival curves for individual flows obtained  from the demultiplexing of an aggregate, using Deterministic Network Calculus (DNC) and structural information on the demultiplexing scheme.

---

## Overview

In many real-time asystems, traffic generated by a source is demultiplexed into multiple flows destined to different resources or paths. While the aggregate traffic may be constrained by a known arrival curve, directly applying this constraint to each individual flow leads to overly pessimistic worst-case bounds.

The method implemented in this repository derives **tight worst-case arrival constraints** for an individual flow, i.e. the  *Type of Interest (ToI) flow* demultiplexed from an aggregate, by leveraging:
- the arrival curve of the aggregate flow, and
- spatial characterization of how traffic is arranged within each cycle of the aggregate.

The repository includes a notebook that implements and illustrates the three variants of the proposed method:
- **Basic**
- **Offset-aware**
- **Subset-aware**

---

## Repository Contents

- `example_implementation.dib`  
  A .NET Interactive notebook containing:
  - the implementation of the method to compute ToI arrival curves introduced in the paper;
  - a numerical example corresponding to the one presented in the paper.

---

## Implemented Methods

The notebook implements the following key functions:

- **Basic method**  
  Computes the maximum spatial arrangement curve  
  $\Omega_{M,\mathrm{toi}}(b)$  
  as defined in *Theorem 4*, given:
  - minimum cycle length $N^{\min}$,
  - maximum ToI traffic per cycle $N^{\max}_{\mathrm{toi}}$.

- **Offset-aware method**  
  Computes $\Omega_{M,\mathrm{toi}}(b)$ as in *Theorem 9*, additionally exploiting:
  - minimum and maximum offsets of non-ToI traffic within the cycle.

- **Subset-aware method**  
  Computes $\Omega_{M,\mathrm{toi}}(b)$ as in *Theorems 12 and 13*, by:
  - modeling ToI traffic as appearing in multiple subsets within a cycle,
  - computing subset-wise spatial arrangement curves, and
  - taking their maximum.

- **Arrival curve derivation**  
  For all methods, the ToI arrival curve is obtained by composing the aggregate arrival curve with the corresponding maximum spatial arrangement curve, as stated in *Theorems 8, 11, and 14*.

---

## Numerical Example

The notebook includes a fully worked numerical example that matches the parameter configuration presented in **Section 6** of the paper.

Specifically:
- the aggregate traffic is constrained by a leaky-bucket arrival curve,
- cycle parameters and spatial constraints are instantiated,
- arrival curves for the Flow of Interest are computed and plotted for:
  - the basic method,
  - the offset-aware method, and
  - the subset-aware method.

The example highlights the progressive tightening of worst-case bounds obtained by incorporating additional structural information.

---

## Requirements

The notebook relies on the following .NET libraries:

- `Unipi.Nancy.Numerics`
- `Unipi.Nancy.MinPlusAlgebra`
- `Unipi.Nancy.NetworkCalculus`
- `Unipi.Nancy.Interactive`

These are automatically loaded via NuGet within the notebook.

> **Note**  
> At the time of writing, the first execution of the first code cell may produce a kernel initialization error. Re-running the cell resolves the issue.

---

## Usage

1. Open the `example_implementation.dib` notebook using a .NET Interactive-compatible environment.
2. Execute the cells sequentially to:
   - instantiate the model parameters,
   - compute spatial arrangement curves, and
   - derive and visualize the resulting arrival curves for the Flow of Interest.

The notebook is intended as a **reference implementation and illustrative example**, rather than as a fully packaged analysis tool.

---

## Relation to the Paper

This repository is meant to support:
- reproducibility of the results,
- understanding of the proposed method, and
- experimentation with alternative parameter configurations.

For the full theoretical framework, proofs, and discussion, please refer to the paper.
